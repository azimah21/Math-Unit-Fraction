<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unit Fraction Addition Game</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="header">
      <h1>Unit Fraction Builder</h1>
      <p class="subtitle">Add two unit fractions to make another unit fraction</p>
    </header>

    <main class="container">
      <section class="info">
        <div class="scoreboard">
          <span id="questionProgress">Question 1/10</span>
          <span id="score">Score: 0</span>
        </div>
        <div class="target">
          Target: <span id="targetFraction">1/?</span>
        </div>
      </section>

      <section class="visuals" aria-label="Fraction visuals">
        <div class="visual-col">
          <h3>Target</h3>
          <div id="targetBar" class="fraction-bar" aria-label="Target fraction bar"></div>
        </div>
        <div class="visual-col">
          <h3>Your Selection</h3>
          <div id="selectionBars">
            <div id="selBar1" class="fraction-bar" aria-label="First selected fraction bar"></div>
            <div id="selBar2" class="fraction-bar" aria-label="Second selected fraction bar"></div>
          </div>
        </div>
      </section>

      <section class="choices" aria-label="Choose denominators">
        <h3>Pick exactly two denominators</h3>
        <div id="choicesGrid" class="grid"></div>
      </section>

      <section class="controls">
        <button id="checkBtn" disabled>Check Answer</button>
        <button id="nextBtn" class="secondary" hidden>Next Question</button>
        <button id="resetBtn" class="tertiary">Reset Selection</button>
      </section>

      <section id="feedback" class="feedback" aria-live="polite"></section>

      <section id="summary" class="summary" hidden>
        <h2>Set Complete!</h2>
        <p id="finalScore">You scored 0/10 points.</p>
        <button id="playAgainBtn" class="secondary">Start New Set</button>
      </section>

      <section class="help">
        <h3>How it works</h3>
        <p>
          A unit fraction has a numerator of 1, like <strong>1/3</strong> or <strong>1/5</strong>.
          Your goal is to pick two unit fractions whose sum is another unit fraction.
        </p>
        <p>
          Example: 1/3 + 1/6 = 1/2, because (3 + 6) / (3 × 6) = 9/18 = 1/2.
        </p>
      </section>
// --- Adaptive state ---
const adaptive = {
  enabled: true, // set false to disable quickly
  level: 1, // 1 = easy, 2 = medium, 3 = hard
  correctStreak: 0,
  total: 0,
  correct: 0,
};

// Choose denominators by level (tune ranges for your class)
function pickDenominator(level) {
  if (level === 1) return randFrom([2, 3, 4, 5, 6]);
  if (level === 2) return randFrom([7, 8, 9, 10, 12]);
  return randFrom([15, 16, 18, 20, 24]); // harder
}

function randFrom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// Call this to create the next question
function generateQuestion() {
  const level = adaptive.enabled ? adaptive.level : 1;
  const d1 = pickDenominator(level);
  const d2 = pickDenominator(level);
  // Ensure two unit fractions; you can enforce d1 ≠ d2 if needed
  return { f1: {n:1,d:d1}, f2: {n:1,d:d2} };
}

// Call this after the user submits an answer
function gradeAndAdvance(isCorrect) {
  adaptive.total++;
  if (isCorrect) {
    adaptive.correct++;
    adaptive.correctStreak++;
    // Level up when on a roll
    if (adaptive.enabled && adaptive.correctStreak >= 3 && adaptive.level < 3) {
      adaptive.level++;
      adaptive.correctStreak = 0;
    }
  } else {
    adaptive.correctStreak = 0;
    // If struggling, ease up
    if (adaptive.enabled && adaptive.level > 1) adaptive.level--;
  }
  // generate next question
  const nextQ = generateQuestion();
  renderQuestion(nextQ);
}

// (Example) attach to your existing submit/check handler:
// const isCorrect = checkAnswer(userAnswer);
// gradeAndAdvance(isCorrect);

<label>
  <input type="checkbox" id="adaptiveToggle" checked>
  Adaptive mode
</label>

document.getElementById('adaptiveToggle').addEventListener('change', (e)=>{
  adaptive.enabled = e.target.checked;
});
    
    
    </main>

    <script src="game.js?v=2"></script>
  </body>

  </html>
