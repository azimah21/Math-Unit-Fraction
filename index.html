<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Unit Fraction Builder</title>
<style>
  :root{
    --bg:#0f172a; /* slate-900 */
    --panel:#111827; /* gray-900 */
    --muted:#93a3b8; /* slate-400 */
    --text:#e5e7eb; /* gray-200 */
    --accent:#60a5fa; /* blue-400 */
    --accent-2:#34d399; /* emerald-400 */
    --danger:#f87171; /* red-400 */
    --card:#0b1220;
    --btn:#1f2937;
    --btn-active:#374151;
    --ring:#1d4ed8;
  }
  *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  html,body{margin:0;background:var(--bg);color:var(--text)}
  .wrap{max-width:820px;margin:0 auto;padding:20px}
  h1{margin:12px 0 4px 0;text-align:center;font-weight:800;font-size:32px}
  p.sub{margin:0 0 18px 0;text-align:center;color:var(--muted)}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .bar{display:flex;justify-content:space-between;align-items:center;
       background:var(--panel);border-radius:12px;padding:14px 16px;margin:10px 0}
  .card{background:var(--card);border:1px solid #1b2437;border-radius:16px;padding:18px;margin:14px 0}
  .title{font-weight:700;margin:0 0 10px 0}
  .muted{color:var(--muted)}
  .progress{height:12px;background:#0a1222;border-radius:999px;overflow:hidden;border:1px solid #1b2437}
  .progress > span{display:block;height:100%;background:var(--accent);width:0%}
  .btn{
    background:var(--btn);border:1px solid #1f2a44;color:var(--text);
    padding:12px 14px;border-radius:12px;font-weight:600;cursor:pointer;
    transition:transform .04s ease, background .15s ease, border .15s ease
  }
  .btn:hover{background:var(--btn-active)}
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:var(--accent);border-color:#2a63d8;color:#061021}
  .btn.ghost{background:transparent;border-color:#24304d}
  .grid{
    display:grid;gap:12px;
    grid-template-columns:repeat(4,minmax(0,1fr));
  }
  .chip{
    text-align:center;padding:16px 10px;border-radius:14px;border:1px solid #23304d;
    background:#101a30;cursor:pointer;font-weight:700
  }
  .chip.selected{outline:3px solid var(--ring);background:#0e1a34}
  .chip.locked{opacity:.45;pointer-events:none}
  .feedback{font-weight:700;margin-top:8px}
  .good{color:var(--accent-2)}
  .bad{color:var(--danger)}
  @media (max-width:560px){ .grid{grid-template-columns:repeat(2,1fr)} }
  code{background:#0f1a33;border:1px solid #1c2742;padding:1px 6px;border-radius:6px}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Unit Fraction Builder</h1>
    <p class="sub">Pick two unit fractions <em>1/a</em> and <em>1/b</em> whose sum equals the target <em>1/n</em>.</p>

    <!-- top status bar -->
    <div class="bar">
      <div><strong>Question:</strong> <span id="qnum">1</span>/10</div>
      <div><strong>Score:</strong> <span id="score">0</span></div>
      <div><strong>Target:</strong> <span id="targetLabel">1/6</span></div>
    </div>
    <div class="progress" aria-label="progress"><span id="progressFill"></span></div>

    <!-- target & selection -->
    <div class="card">
      <div class="title">Target</div>
      <div id="targetPretty" class="muted">1/6</div>
    </div>

    <div class="card">
      <div class="title">Your Selection</div>
      <div id="selection" class="muted">Pick exactly two denominators below.</div>
    </div>

    <!-- candidates -->
    <div class="card">
      <div class="title">Pick exactly two denominators</div>
      <div id="grid" class="grid" role="group" aria-label="denominator choices"></div>
      <div class="row" style="margin-top:14px">
        <button id="checkBtn" class="btn primary">Check Answer</button>
        <button id="resetBtn" class="btn">Reset Selection</button>
        <button id="nextBtn" class="btn ghost" title="Skip to next">Next ▸</button>
      </div>
      <div id="feedback" class="feedback muted"></div>
    </div>

    <!-- how it works -->
    <div class="card">
      <div class="title">How it works</div>
      <p class="muted">
        We want <code>1/a + 1/b = 1/n</code>. That’s true exactly when
        <code>n(a + b) = ab</code>. For each question the game chooses a target
        denominator <code>n</code> and generates a valid pair <code>(a,b)</code>, mixes in
        good distractors, and asks you to find the correct pair.
      </p>
      <p class="muted">
        Difficulty adapts to you: a short correct streak moves you up a level; a
        short struggle moves you down. You can tune the ranges in the code section
        marked <strong>“ADAPTIVE SETTINGS”</strong>.
      </p>
    </div>
  </div>

<script>
/* ======================== ADAPTIVE SETTINGS ======================== */
/* Level → pool of target n, and denominator ranges for candidates. */
const LEVELS = {
  1: { targets:[4,5,6,7,8,9], pool:[4,5,6,7,8,9,10,12], gridCount:8 },
  2: { targets:[6,7,8,9,10,12,14], pool:[5,6,7,8,9,10,11,12,14,15,16,18], gridCount:10 },
  3: { targets:[8,9,10,12,14,15,18,20,24], pool:[6,7,8,9,10,11,12,13,14,15,16,18,20,21,24], gridCount:12 }
};
/* How fast to move levels */
const STREAK_UP = 3; // three in a row → level up
const STREAK_DOWN = 3; // three misses → level down

/* ============================ STATE =============================== */
let questionNum = 0, totalQuestions = 10, score = 0;
let level = 1, winStreak = 0, loseStreak = 0;
let targetN = 6, correctPair = [3,6]; // a,b that solve 1/a + 1/b = 1/n
let picked = []; // current user choices
let locked = false;

/* ============================ UTILS =============================== */
const byId = id => document.getElementById(id);
const shuffle = arr => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
const gcd = (a,b)=>b?gcd(b,a%b):a;

/* Given n, create a valid (a,b) using the factor-pair trick:
   If (x*y = n^2), then a = n + n^2/x and b = n + x is a solution. */
function makeValidPair(n){
  const factors = [];
  for(let x=1; x*x<=n*n; x++){
    if((n*n)%x===0){ factors.push(x); if(x!==(n*n)/x) factors.push((n*n)/x); }
  }
  const x = factors[Math.floor(Math.random()*factors.length)];
  const a = n + Math.floor((n*n)/x);
  const b = n + x;
  return [a,b];
}

/* Build a candidate grid that contains the correct pair plus distractors. */
function buildCandidates(n, pair, gridCount){
  const pool = new Set(LEVELS[level].pool);
  pool.add(pair[0]); pool.add(pair[1]); // ensure present
  // add distractors that *almost* work or are plausible
  const near = [n-1,n+1,2*n-1,2*n,3*n-1,3*n].filter(v=>v>2);
  near.forEach(v=>pool.add(v));
  const list = Array.from(pool);
  const shuffled = shuffle(list).slice(0, gridCount-2);
  shuffled.push(pair[0], pair[1]);
  return shuffle(shuffled);
}

/* Check whether 1/a + 1/b == 1/n using integer math */
function isCorrectPair(a,b,n){
  return n*(a+b) === a*b;
}

/* ============================ RENDER ============================== */
function render(){
  byId('qnum').textContent = questionNum;
  byId('score').textContent = score;
  byId('targetLabel').textContent = `1/${targetN}`;
  byId('targetPretty').textContent = `Make 1/${targetN} using two unit fractions.`;
  byId('selection').textContent = picked.length ? picked.map(d=>`1/${d}`).join(' + ') : 'Pick exactly two denominators below.';
  byId('feedback').textContent = '';
  byId('feedback').className = 'feedback muted';
  byId('progressFill').style.width = `${(questionNum-1)/totalQuestions*100}%`;

  const grid = byId('grid');
  grid.innerHTML = '';
  const candidates = buildCandidates(targetN, correctPair, LEVELS[level].gridCount);
  candidates.forEach(val=>{
    const btn = document.createElement('button');
    btn.className = 'chip';
    btn.textContent = val;
    btn.addEventListener('click', ()=>{
      if(locked) return;
      const i = picked.indexOf(val);
      if(i>-1){ picked.splice(i,1); btn.classList.remove('selected'); }
      else{
        if(picked.length===2){ return; }
        picked.push(val);
        btn.classList.add('selected');
      }
      byId('selection').textContent = picked.length ? picked.map(d=>`1/${d}`).join(' + ') : 'Pick exactly two denominators below.';
    });
    grid.appendChild(btn);
  });

  // button states
  byId('checkBtn').disabled = false;
  byId('nextBtn').disabled = true;
  locked = false;
}

/* ========================= GAME FLOW ============================= */
function newQuestion(){
  if(questionNum>=totalQuestions){
    // finished set
    byId('progressFill').style.width = '100%';
    byId('feedback').className = 'feedback good';
    byId('feedback').textContent = `Great work! Final score: ${score}/${totalQuestions}.`;
    byId('grid').querySelectorAll('.chip').forEach(b=>b.classList.add('locked'));
    byId('checkBtn').disabled = true;
    byId('nextBtn').disabled = true;
    return;
  }
  questionNum++;
  // pick a target and make a valid pair for this level
  const targets = LEVELS[level].targets;
  targetN = targets[Math.floor(Math.random()*targets.length)];
  correctPair = makeValidPair(targetN);
  picked = [];
  render();
}

function grade(){
  if(picked.length!==2) {
    byId('feedback').className='feedback bad';
    byId('feedback').textContent='Pick exactly two denominators.';
    return;
  }
  const [a,b] = picked;
  const ok = isCorrectPair(a,b,targetN);
  locked = true;
  byId('grid').querySelectorAll('.chip').forEach(btn=>{
    btn.classList.add('locked');
    const val = Number(btn.textContent);
    // tiny visual cue: outline correct ones
    if((val===correctPair[0]||val===correctPair[1])) btn.style.outline='3px solid var(--accent-2)';
  });

  if(ok){
    score++;
    winStreak++; loseStreak=0;
    byId('feedback').className='feedback good';
    byId('feedback').textContent='Nice! That makes the target exactly.';
    if(winStreak>=STREAK_UP && level<3){ level++; winStreak=0; }
  }else{
    loseStreak++; winStreak=0;
    byId('feedback').className='feedback bad';
    byId('feedback').innerHTML = `Not quite. A correct pair for 1/${targetN} is <strong>1/${correctPair[0]} + 1/${correctPair[1]}</strong>.`;
    if(loseStreak>=STREAK_DOWN && level>1){ level--; loseStreak=0; }
  }

  byId('checkBtn').disabled = true;
  byId('nextBtn').disabled = false;
}

/* Buttons */
byId('checkBtn').addEventListener('click', grade);
byId('resetBtn').addEventListener('click', ()=>{ if(!locked){ picked=[]; render(); }});
byId('nextBtn').addEventListener('click', newQuestion);

/* Kick off */
newQuestion();
</script>
</body>
</html>

Sent from Outlook for Android
From: Azimah Ghazali <azimahghazali@hotmail.com>
Sent: Sunday, November 9, 2025 6:27:38 AM
To: Azimah Ghazali <azimahghazali@hotmail.com>
Subject: Adaptive Thinking Code 1
 
// --- Adaptive state ---
const adaptive = {
  enabled: true, // set false to disable quickly
  level: 1, // 1 = easy, 2 = medium, 3 = hard
  correctStreak: 0,
  total: 0,
  correct: 0,
};

// Choose denominators by level (tune ranges for your class)
function pickDenominator(level) {
  if (level === 1) return randFrom([2, 3, 4, 5, 6]);
  if (level === 2) return randFrom([7, 8, 9, 10, 12]);
  return randFrom([15, 16, 18, 20, 24]); // harder
}

function randFrom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// Call this to create the next question
function generateQuestion() {
  const level = adaptive.enabled ? adaptive.level : 1;
  const d1 = pickDenominator(level);
  const d2 = pickDenominator(level);
  // Ensure two unit fractions; you can enforce d1 ≠ d2 if needed
  return { f1: {n:1,d:d1}, f2: {n:1,d:d2} };
}

// Call this after the user submits an answer
function gradeAndAdvance(isCorrect) {
  adaptive.total++;
  if (isCorrect) {
    adaptive.correct++;
    adaptive.correctStreak++;
    // Level up when on a roll
    if (adaptive.enabled && adaptive.correctStreak >= 3 && adaptive.level < 3) {
      adaptive.level++;
      adaptive.correctStreak = 0;
    }
  } else {
    adaptive.correctStreak = 0;
    // If struggling, ease up
    if (adaptive.enabled && adaptive.level > 1) adaptive.level--;
  }
  // generate next question
  const nextQ = generateQuestion();
  renderQuestion(nextQ);
}

// (Example) attach to your existing submit/check handler:
// const isCorrect = checkAnswer(userAnswer);
// gradeAndAdvance(isCorrect);

<label>
  <input type="checkbox" id="adaptiveToggle" checked>
  Adaptive mode
</label>

document.getElementById('adaptiveToggle').addEventListener('change', (e)=>{
  adaptive.enabled = e.target.checked;
});
