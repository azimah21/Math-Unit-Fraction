<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Unit Fraction Builder</title>
<style>
  :root{
    --bg:#f7fafc; /* very light */
    --card:#ffffff;
    --ink:#1f2937;
    --muted:#4b5563;
    --accent:#2563eb;
    --good:#059669;
    --bad:#dc2626;
    --ring: 0 0 0 3px rgba(37,99,235,.25);
    --radius:16px;
  }
  html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;}
  .wrap{max-width:820px;margin:auto;padding:20px;}
  h1{margin:6px 0 14px;font-size:clamp(22px,3.6vw,34px);}
  .row{display:grid;gap:12px}
  .grid-2{grid-template-columns:1fr 1fr}
  @media (max-width:700px){.grid-2{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:var(--radius);box-shadow:0 4px 16px rgba(0,0,0,.05);padding:16px}
  .pill{display:inline-flex;gap:8px;align-items:center;background:#eef2ff;color:#3730a3;border-radius:999px;padding:6px 10px;font-weight:600}
  .muted{color:var(--muted)}
  .btn{
    appearance:none;border:0;border-radius:12px;padding:12px 14px;
    background:#eef2ff;color:#111827;font-weight:700;cursor:pointer;
    transition:.15s transform ease, .15s background ease; width:100%;
  }
  .btn:hover{transform:translateY(-1px)}
  .btn[aria-pressed="true"]{outline:none;box-shadow:var(--ring)}
  .btn.primary{background:var(--accent);color:white}
  .btn.neutral{background:#e5e7eb}
  .answers{display:grid;grid-template-columns:repeat(auto-fit,minmax(92px,1fr));gap:10px}
  .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;background:#111827;color:#f9fafb;border-radius:8px;padding:2px 6px;font-size:.85rem}
  .tag{display:inline-block;background:#f1f5f9;border-radius:8px;padding:2px 8px;margin-right:6px}
  .bar{width:100%;height:34px;border-radius:10px;background:#e5e7eb;position:relative;overflow:hidden}
  .bar .shade{position:absolute;left:0;top:0;bottom:0;background:#93c5fd}
  .bar .ticks{position:absolute;inset:0;display:grid}
  .bar .ticks>div{border-right:1px solid rgba(0,0,0,.08)}
  .labelRow{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:.2rem 0 .4rem}
  .labelRow b{font-size:0.95rem}
  .callout{border-left:5px solid var(--accent);padding:8px 12px;background:#eff6ff;border-radius:10px}
  .ok{color:var(--good)} .bad{color:var(--bad)}
  .hide{display:none}
  .sm{font-size:.95rem}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Unit Fraction Builder</h1>
    <p class="muted sm">Pick two unit fractions <span class="kbd">1/a</span> and <span class="kbd">1/b</span> whose sum equals the target <span class="kbd">1/n</span>.</p>

    <div id="status" class="row grid-2">
      <div class="card">
        <div class="pill">Question <span id="qNum">1</span> / 10</div>
        <div style="height:6px"></div>
        <div><span class="tag">Score: <b id="score">0</b></span> <span class="tag">Target: <b id="targetText">—</b></span></div>
      </div>
      <div class="card" id="starters">
        <b>Warm-up thinking</b>
        <ol class="sm" style="margin:.4rem 0 .2rem">
          <li>Our target is <span id="tSmallBig">1/n</span>. Is this a <i>small</i> amount or a big amount?</li>
          <li>Unit fractions get smaller when denominators get bigger. Do you expect a “big+small” pair or “small+small”?</li>
          <li>Quick estimate: will both denominators likely be bigger than <span id="tNum">n</span> or around it?</li>
        </ol>
      </div>
    </div>

    <div class="card">
      <div class="labelRow"><b>Visuals</b><span class="muted sm">Target on top • Your picks below</span></div>
      <div class="labelRow"><span class="muted">Target</span><span id="targetFrac" class="kbd">1/n</span></div>
      <div id="barTarget" class="bar" aria-label="Target fraction bar"></div>

      <div class="labelRow"><span class="muted">Your first pick</span><span id="pickA" class="kbd">—</span></div>
      <div id="barA" class="bar" aria-label="First pick bar"></div>

      <div class="labelRow"><span class="muted">Your second pick</span><span id="pickB" class="kbd">—</span></div>
      <div id="barB" class="bar" aria-label="Second pick bar"></div>
    </div>

    <div class="card" id="phasePickOne">
      <b>Your first move</b>
      <p class="sm">Pick <b>one unit fraction</b> you think might work. Why that one?</p>
      <div id="choicesOne" class="answers"></div>
    </div>

    <div class="card hide" id="phasePickTwo">
      <b>Now figure out the other</b>
      <p class="sm">How would you work out what the other denominator should be so that <span class="kbd">1/a + 1/b = 1/n</span>?</p>
      <ul class="sm">
        <li>Use the clue: it works exactly when <span class="kbd">n(a + b) = ab</span>.</li>
        <li>Or think by size: if <span class="kbd">1/a</span> is already big, then <span class="kbd">1/b</span> must be smaller, so <span class="kbd">b</span> should be bigger.</li>
      </ul>
      <div id="choicesTwo" class="answers"></div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="checkBtn" class="btn primary">Check Answer</button>
        <button id="resetBtn" class="btn neutral">Reset Selection</button>
        <button id="nextBtn" class="btn neutral hide">Next</button>
      </div>
    </div>

    <div class="card hide" id="feedback">
      <b>Use your mistake like a scientist</b>
      <div id="fbText" class="callout sm" style="margin:.5rem 0"></div>
      <div class="sm">
        <p>If you try one pair and it’s <b>too big</b> or <b>too small</b>, what does that tell you about your next guess?</p>
        <p><b>Think aloud:</b></p>
        <ul>
          <li>“Is our sum bigger or smaller than <span id="targetMini">1/n</span>?”</li>
          <li>“So should our denominators be bigger numbers or smaller numbers next time?”</li>
          <li>“Which number will I change first, and why?”</li>
        </ul>
      </div>
    </div>

    <div class="card">
      <p class="muted sm">How it works: we want <span class="kbd">1/a + 1/b = 1/n</span>. That’s true exactly when <span class="kbd">n(a+b)=ab</span>. Difficulty adapts to you.</p>
    </div>
  </div>

<script>
/* ------------ helpers ------------- */
const $ = sel =>

